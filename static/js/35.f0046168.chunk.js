"use strict";(self.webpackChunk_kne_components_scroll_loader=self.webpackChunk_kne_components_scroll_loader||[]).push([[35],{71830:(e,a,t)=>{t.r(a),t.d(a,{FetchScrollLoader:()=>v,default:()=>E});var r=t(94922),n=t.n(r),l=t(55199),o=t(20046),s=t(98424),c=t(78678),i=t(54159),p=t.n(i),u=(t(1251),t(16052)),m=t.n(u),d=t(33227),g=t.n(d),f=t(64755),h=t.n(f),S=t(67823),b="_7DqrJ";const y=e=>{let{getScrollerRef:a,loadMore:t,maxFullCount:n}=e;const l=(0,c.A)(t),o=(0,c.A)(a);return(0,r.useEffect)((()=>{let e=n;const a=o(),t=async()=>{a.clientHeight===a.scrollHeight&&e>0&&(await l().then((()=>new Promise((e=>{setTimeout(e,500)})))),e--,await t())};t()}),[n,l,o]),null},E=(0,r.forwardRef)(((e,a)=>{const t=Object.assign({},{loadComplete:"\u52a0\u8f7d\u5b8c\u6210"},e.locale),{className:i,noMore:u,onLoader:m,isLoading:d,completeTips:g,maxFullCount:f,children:h}=Object.assign({},{maxFullCount:3,completeTips:t.loadComplete},e,{locale:t}),S=(0,r.useRef)(),E=(0,c.A)(m),P=(0,r.useRef)(!u&&!d);P.current=!u&&!d,(0,r.useImperativeHandle)(a,(()=>S.current),[]);const T=(0,s.dh)((e=>{const a=e.target;P.current&&a.clientHeight+a.scrollTop+20>a.scrollHeight&&E()}),100);return n().createElement(o.A,{className:p()("load-container",i),scrollableNodeProps:{ref:S,onScroll:T}},!d&&!u&&n().createElement(y,{maxFullCount:f,getScrollerRef:()=>S.current,loadMore:E}),n().createElement(l.Space,{direction:"vertical"},n().createElement("div",null,h),d?n().createElement("div",{className:b},n().createElement(l.Spin,{size:"small"})):null,u&&g?n().createElement("div",{className:b},g):null))}));function P(){return P=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},P.apply(null,arguments)}const T=["dataFormat","mergeList","completeTips","api","searchProps","getSearchProps","children"],v=e=>{const a=Object.assign({},{api:{loader:()=>({pageData:[],totalCount:0})},mergeList:(e,a)=>Object.assign({},a,{pageData:e.pageData.concat(a.pageData)}),dataFormat:e=>({list:e.pageData,total:e.totalCount}),children:e=>(console.log(e),null)},e),{dataFormat:t,mergeList:r,completeTips:l,api:o,searchProps:s,getSearchProps:c,children:i}=a,p=function(e,a){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.includes(r))continue;t[r]=e[r]}return t}(a,T),u=Object.assign({},{paramsType:"data",current:"currentPage",pageSizeName:"perPage",pageSize:20},e.pagination),d=e=>{if(c&&(0,S.isNotEmpty)(e)){const a=c(e);return(0,S.isNotEmpty)(a)?{[u.paramsType]:a}:{}}return{}};return n().createElement(m(),P({},Object.assign({},o,d(s)),{render:e=>{const a=t(e.data),o=g()(e.requestParams,[u.paramsType,u.current],1),c=g()(e.requestParams,[u.paramsType,u.pageSizeName])||u.pageSize,m=!a.total||o*c>=a.total;return n().createElement(E,P({},p,{completeTips:l,isLoading:!e.isComplete,noMore:m,onLoader:async()=>{await e.loadMore(h()({[u.paramsType]:{[u.pageSizeName]:c,[u.current]:o+1}},d(s)),r)}}),i({fetchApi:e,list:a.list,data:e.data}))}}))}}}]);
//# sourceMappingURL=35.f0046168.chunk.js.map