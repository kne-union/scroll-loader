"use strict";(self.webpackChunk_kne_components_scroll_loader=self.webpackChunk_kne_components_scroll_loader||[]).push([[198],{11448:(t,n,e)=>{var a=e(89379),r=(e(94922),e(87558)),d=e(55199),o=e(94312),l=e(13050),c=e(89261);window.PUBLIC_URL="/scroll-loader";const s={url:"https://uc.fatalent.cn",tpl:"{{url}}/packages/@kne-components/{{remote}}/{{version}}/build"};var p=e(65457),i=e(53986),m=e(94679),g=e(66964),h=(e(91296),e(46446));const u=["globalPreset"],f=g.Ay.ExampleRoutes,S=t=>{let{globalPreset:n}=t,e=(0,i.A)(t,u);return(0,c.jsx)(m.HashRouter,{children:(0,c.jsx)(f,(0,a.A)((0,a.A)({},e),{},{paths:[{key:"components",path:"/",title:"\u9996\u9875"}],preset:n,themeToken:n.themeToken,readme:h.default,pageProps:{menu:null}}))})},b=p.createRoot(document.getElementById("root"));(async t=>{const n=await(async()=>{const t=(0,o.A)({errorHandler:t=>d.message.error(t)}),n=(0,a.A)((0,a.A)({},s),{},{remote:"components-core",defaultVersion:"0.4.3"});return(0,l.preset)({remotes:{default:n,"components-core":n,"components-iconfont":(0,a.A)((0,a.A)({},s),{},{remote:"components-iconfont",defaultVersion:"0.2.1"}),"scroll-loader":(0,a.A)((0,a.A)({},s),{},{remote:"scroll-loader",defaultVersion:"0.1.12"})}}),(0,r.preset)({ajax:t,loading:(0,c.jsx)(d.Spin,{delay:500,style:{position:"absolute",left:"50%",padding:"10px",transform:"translateX(-50%)"}}),error:null,empty:(0,c.jsx)(d.Empty,{}),transformResponse:t=>{const{data:n}=t;return t.data={code:0===n.code?200:n.code,msg:n.msg,results:n.data},t}}),{ajax:t,enums:{},apis:{},themeToken:{colorPrimary:"#4183F0"}}})();b.render((0,c.jsx)(t,{themeToken:n.themeToken,globalPreset:n}))})(S)},69666:(t,n,e)=>{e.d(n,{A:()=>o});var a=e(96210),r=(e(72241),e(16052)),d=e(94530);const o={name:"scroll-loader",summary:"<p>\u4e00\u4e2a\u7528\u4e8e\u5b9e\u73b0\u6eda\u52a8\u52a0\u8f7d\u529f\u80fd\u7684React\u7ec4\u4ef6\u5e93\u3002\u5f53\u7528\u6237\u6eda\u52a8\u5230\u9875\u9762\u5e95\u90e8\u65f6\uff0c\u81ea\u52a8\u52a0\u8f7d\u66f4\u591a\u6570\u636e\uff0c\u63d0\u4f9b\u65e0\u9650\u6eda\u52a8\u7684\u7528\u6237\u4f53\u9a8c\u3002</p>\n<h4>\u7279\u70b9</h4>\n<ul>\n<li>\u652f\u6301\u81ea\u5b9a\u4e49\u52a0\u8f7d\u72b6\u6001\u548c\u65e0\u66f4\u591a\u6570\u636e\u72b6\u6001\u7684\u663e\u793a</li>\n<li>\u63d0\u4f9b\u57fa\u7840\u7684<code>ScrollLoader</code>\u7ec4\u4ef6\u548c\u96c6\u6210\u4e86\u6570\u636e\u83b7\u53d6\u529f\u80fd\u7684<code>FetchScrollLoader</code>\u7ec4\u4ef6</li>\n<li>\u652f\u6301\u56fd\u9645\u5316\uff0c\u5185\u7f6e\u4e2d\u6587\u548c\u82f1\u6587\u652f\u6301</li>\n<li>\u4f7f\u7528\u7b80\u5355\uff0c\u914d\u7f6e\u7075\u6d3b</li>\n</ul>",description:"\u6eda\u52a8\u52a0\u8f7d\u4e0b\u4e00\u9875\u6570\u636e.",packageName:"@kne/scroll-loader",api:"<h4>ScrollLoader</h4>\n<p>\u57fa\u7840\u7684\u6eda\u52a8\u52a0\u8f7d\u7ec4\u4ef6\uff0c\u5f53\u7528\u6237\u6eda\u52a8\u5230\u9875\u9762\u5e95\u90e8\u65f6\u89e6\u53d1\u52a0\u8f7d\u66f4\u591a\u6570\u636e\u7684\u56de\u8c03\u51fd\u6570\u3002</p>\n<h5>\u5c5e\u6027</h5>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n<th>\u8bf4\u660e</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>className</td>\n<td>string</td>\n<td>-</td>\n<td>\u81ea\u5b9a\u4e49\u7c7b\u540d</td>\n</tr>\n<tr>\n<td>noMore</td>\n<td>boolean</td>\n<td>-</td>\n<td>\u662f\u5426\u6ca1\u6709\u66f4\u591a\u6570\u636e\uff0c\u4e3atrue\u65f6\u4e0d\u518d\u89e6\u53d1\u52a0\u8f7d</td>\n</tr>\n<tr>\n<td>onLoader</td>\n<td>function</td>\n<td>-</td>\n<td>\u52a0\u8f7d\u66f4\u591a\u6570\u636e\u7684\u56de\u8c03\u51fd\u6570</td>\n</tr>\n<tr>\n<td>isLoading</td>\n<td>boolean</td>\n<td>-</td>\n<td>\u662f\u5426\u6b63\u5728\u52a0\u8f7d\u6570\u636e</td>\n</tr>\n<tr>\n<td>completeTips</td>\n<td>string</td>\n<td>\"\u5df2\u52a0\u8f7d\u5168\u90e8\u6570\u636e\"</td>\n<td>\u52a0\u8f7d\u5b8c\u6210\u7684\u63d0\u793a\u6587\u672c</td>\n</tr>\n<tr>\n<td>maxFullCount</td>\n<td>number</td>\n<td>3</td>\n<td>\u5f53\u5185\u5bb9\u4e0d\u8db3\u4ee5\u6eda\u52a8\u65f6\uff0c\u81ea\u52a8\u89e6\u53d1\u52a0\u8f7d\u7684\u6700\u5927\u6b21\u6570</td>\n</tr>\n<tr>\n<td>children</td>\n<td>ReactNode</td>\n<td>-</td>\n<td>\u5b50\u5143\u7d20\uff0c\u901a\u5e38\u662f\u6570\u636e\u5217\u8868</td>\n</tr>\n</tbody>\n</table>\n<h4>FetchScrollLoader</h4>\n<p>\u96c6\u6210\u4e86\u6570\u636e\u83b7\u53d6\u529f\u80fd\u7684\u6eda\u52a8\u52a0\u8f7d\u7ec4\u4ef6\uff0c\u7b80\u5316\u4e86<code>ScrollLoader</code>\u548c<code>Fetch</code>\u7ec4\u4ef6\u7684\u7ec4\u5408\u4f7f\u7528\u3002</p>\n<h5>\u5c5e\u6027</h5>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n<th>\u8bf4\u660e</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>api</td>\n<td>object</td>\n<td>{ loader: () =&gt; ({ pageData: [], totalCount: 0 }) }</td>\n<td>\u6570\u636e\u83b7\u53d6API\u914d\u7f6e\uff0c\u5fc5\u987b\u5305\u542bloader\u51fd\u6570</td>\n</tr>\n<tr>\n<td>dataFormat</td>\n<td>function</td>\n<td>(data) =&gt; ({ list: data.pageData, total: data.totalCount })</td>\n<td>\u6570\u636e\u683c\u5f0f\u5316\u51fd\u6570\uff0c\u5c06API\u8fd4\u56de\u7684\u6570\u636e\u8f6c\u6362\u4e3a\u7ec4\u4ef6\u9700\u8981\u7684\u683c\u5f0f</td>\n</tr>\n<tr>\n<td>mergeList</td>\n<td>function</td>\n<td>(data, newData) =&gt; ({ ...newData, pageData: data.pageData.concat(newData.pageData) })</td>\n<td>\u5408\u5e76\u5217\u8868\u6570\u636e\u7684\u51fd\u6570\uff0c\u7528\u4e8e\u5c06\u65b0\u52a0\u8f7d\u7684\u6570\u636e\u4e0e\u73b0\u6709\u6570\u636e\u5408\u5e76</td>\n</tr>\n<tr>\n<td>searchProps</td>\n<td>object</td>\n<td>-</td>\n<td>\u641c\u7d22\u53c2\u6570\uff0c\u4f1a\u4f20\u9012\u7ed9API</td>\n</tr>\n<tr>\n<td>getSearchProps</td>\n<td>function</td>\n<td>-</td>\n<td>\u83b7\u53d6\u641c\u7d22\u53c2\u6570\u7684\u51fd\u6570\uff0c\u63a5\u6536searchProps\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56de\u8bf7\u6c42\u53c2\u6570</td>\n</tr>\n<tr>\n<td>children</td>\n<td>function</td>\n<td>-</td>\n<td>\u6e32\u67d3\u51fd\u6570\uff0c\u63a5\u6536{ fetchApi, list, data }\u4f5c\u4e3a\u53c2\u6570\uff0c\u8fd4\u56deReactNode</td>\n</tr>\n<tr>\n<td>render</td>\n<td>function</td>\n<td>({ fetchApi, children }) =&gt; children</td>\n<td>\u81ea\u5b9a\u4e49\u6e32\u67d3\u51fd\u6570\uff0c\u53ef\u7528\u4e8e\u5728ScrollLoader\u5916\u5c42\u6dfb\u52a0\u989d\u5916\u7684UI\u5143\u7d20</td>\n</tr>\n<tr>\n<td>pagination</td>\n<td>object</td>\n<td>{ paramsType: 'data', current: 'currentPage', pageSizeName: 'perPage', pageSize: 20 }</td>\n<td>\u5206\u9875\u914d\u7f6e</td>\n</tr>\n</tbody>\n</table>\n<h6>pagination\u5c5e\u6027\u8be6\u89e3</h6>\n<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n<th>\u8bf4\u660e</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>paramsType</td>\n<td>string</td>\n<td>'data'</td>\n<td>\u5206\u9875\u53c2\u6570\u5728\u8bf7\u6c42\u53c2\u6570\u4e2d\u7684\u4f4d\u7f6e</td>\n</tr>\n<tr>\n<td>current</td>\n<td>string</td>\n<td>'currentPage'</td>\n<td>\u5f53\u524d\u9875\u7801\u7684\u53c2\u6570\u540d</td>\n</tr>\n<tr>\n<td>pageSizeName</td>\n<td>string</td>\n<td>'perPage'</td>\n<td>\u6bcf\u9875\u6761\u6570\u7684\u53c2\u6570\u540d</td>\n</tr>\n<tr>\n<td>pageSize</td>\n<td>number</td>\n<td>20</td>\n<td>\u6bcf\u9875\u6761\u6570</td>\n</tr>\n</tbody>\n</table>",example:{isFull:!1,className:"scroll_loader_f2ee2",style:".scroll_loader_f2ee2 .scroll-list {\n  max-height: 300px;\n}",list:[{title:"ScrollLoader",description:"\u6eda\u52a8\u5230\u5e95\u540e\u81ea\u52a8\u52a0\u8f7d\u4e0b\u4e00\u9875\u6570\u636e",code:"const { get, merge, range } = lodash;\nconst { default: Fetch } = _reactFetch;\nconst { default: ScrollLoader } = _ScrollLoader;\n\nconst BaseExample = () => {\n  return (<Fetch\n    loader={({ data }) => {\n      const params = Object.assign({\n        perPage: 20, currentPage: 1\n      }, data);\n      return new Promise((resolve) => {\n        const start = (params.currentPage - 1) * params.perPage;\n        setTimeout(() => {\n          resolve({\n            totalCount: 100, pageData: range(start, start + params.perPage).map((key) => {\n              return {\n                label: `\u7b2c${key + 1}\u9879`, value: key + 1\n              };\n            })\n          });\n        }, 500);\n      });\n    }}\n    render={(fetchApi) => {\n      const pagination = {\n        paramsType: 'data', current: 'currentPage', pageSize: 'perPage', defaultPageSize: 20\n      };\n      const current = get(fetchApi.requestParams, [pagination.paramsType, pagination.current], 1),\n        pageSize = get(fetchApi.requestParams, [pagination.paramsType, pagination.pageSize]) || pagination.defaultPageSize;\n\n      const formatData = {\n        list: fetchApi.data.pageData, total: fetchApi.data.totalCount\n      };\n      return (<ScrollLoader\n        className=\"scroll-list\"\n        isLoading={!fetchApi.isComplete}\n        noMore={!formatData.total || current * pageSize >= formatData.total}\n        onLoader={async () => {\n          await fetchApi.loadMore(merge({\n            data: {\n              [pagination.pageSize]: pageSize, [pagination.current]: current + 1\n            }\n          }), (data, newData) => {\n            return Object.assign({}, newData, {\n              pageData: data.pageData.concat(newData.pageData)\n            });\n          });\n        }}\n      >\n        {formatData.list.map((item) => {\n          return <div key={item.value}>{item.label}</div>;\n        })}\n      </ScrollLoader>);\n    }}\n  />);\n};\n\nrender(<BaseExample />);\n\n",scope:[{name:"_ScrollLoader",packageName:"@kne/current-lib_scroll-loader",importStatement:'import * as _ScrollLoader from "@kne/scroll-loader"',component:a},{name:"_reactFetch",packageName:"@kne/react-fetch",component:r},{name:"lodash",packageName:"lodash",component:d}]},{title:"FetchScrollLoader",description:"\u5c01\u88c5\u4e86\u6570\u636e\u83b7\u53d6",code:'const { get, merge, range } = lodash;\nconst { FetchScrollLoader } = _ScrollLoader;\n\nconst BaseExample = () => {\n  return <FetchScrollLoader className="scroll-list" api={{\n    loader: ({ data }) => {\n      const params = Object.assign({\n        perPage: 20, currentPage: 1\n      }, data);\n      return new Promise((resolve) => {\n        const start = (params.currentPage - 1) * params.perPage;\n        setTimeout(() => {\n          resolve({\n            totalCount: 100, pageData: range(start, start + params.perPage).map((key) => {\n              return {\n                label: `\u7b2c${key + 1}\u9879`, value: key + 1\n              };\n            })\n          });\n        }, 500);\n      });\n    }\n  }}>{({ list }) => {\n    return list.map((item) => {\n      return <div key={item.value}>{item.label}</div>;\n    });\n  }}</FetchScrollLoader>;\n};\n\nrender(<BaseExample />);\n\n',scope:[{name:"_ScrollLoader",packageName:"@kne/current-lib_scroll-loader",importStatement:'import * as _ScrollLoader from "@kne/scroll-loader"',component:a},{name:"lodash",packageName:"lodash",component:d}]}]}}},72241:()=>{}}]);
//# sourceMappingURL=198.5bf547a5.chunk.js.map