"use strict";(self.webpackChunk_kne_components_scroll_loader=self.webpackChunk_kne_components_scroll_loader||[]).push([[35],{71830:(e,a,t)=>{t.r(a),t.d(a,{FetchScrollLoader:()=>E,default:()=>v});var r=t(94922),n=t.n(r),l=t(55199),o=t(20046),c=t(98424),s=t(78678),i=t(54159),p=t.n(i),u=(t(1251),t(16052)),m=t.n(u),d=t(33227),g=t.n(d),f=t(64755),h=t.n(f),T=t(67823),S="_7DqrJ";const b=e=>{let{getScrollerRef:a,loadMore:t,maxFullCount:n}=e;const l=(0,s.A)(t),o=(0,s.A)(a);return(0,r.useEffect)((()=>{let e=n;const a=o(),t=async()=>{a.clientHeight===a.scrollHeight&&e>0&&(await l().then((()=>new Promise((e=>{setTimeout(e,500)})))),e--,await t())};t()}),[n,l,o]),null},v=(0,r.forwardRef)(((e,a)=>{const t=Object.assign({},{loadComplete:"\u52a0\u8f7d\u5b8c\u6210"},e.locale),{className:i,noMore:u,onLoader:m,isLoading:d,completeTips:g,maxFullCount:f,children:h}=Object.assign({},{maxFullCount:3,completeTips:t.loadComplete},e,{locale:t}),T=(0,r.useRef)(),v=(0,s.A)(m),y=(0,r.useRef)(!u&&!d);y.current=!u&&!d,(0,r.useImperativeHandle)(a,(()=>T.current),[]);const C=(0,c.dh)((e=>{const a=e.target;y.current&&a.clientHeight+a.scrollTop+20>a.scrollHeight&&v()}),100);return n().createElement(o.A,{className:p()("load-container",i),scrollableNodeProps:{ref:T,onScroll:C}},!d&&!u&&n().createElement(b,{maxFullCount:f,getScrollerRef:()=>T.current,loadMore:v}),n().createElement(l.Space,{direction:"vertical"},n().createElement("div",null,h),d?n().createElement("div",{className:S},n().createElement(l.Spin,{size:"small"})):null,u&&g?n().createElement("div",{className:S},g):null))}));function y(){return y=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},y.apply(null,arguments)}const C=["dataFormat","mergeList","searchText","completeTips","api","getSearchProps","children"],E=e=>{const a=Object.assign({},{api:{loader:()=>({pageData:[],totalCount:0})},mergeList:(e,a)=>Object.assign({},a,{pageData:e.pageData.concat(a.pageData)}),dataFormat:e=>({list:e.pageData,total:e.totalCount}),children:e=>(console.log(e),null)},e),{dataFormat:t,mergeList:r,searchText:l,completeTips:o,api:c,getSearchProps:s,children:i}=a,p=function(e,a){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(a.includes(r))continue;t[r]=e[r]}return t}(a,C),u=Object.assign({},{paramsType:"data",current:"currentPage",pageSizeName:"perPage",pageSize:20},e.pagination),d=e=>{if(s&&e){const a=s(e);return(0,T.isNotEmpty)(a)?{[u.paramsType]:a}:{}}return{}};return n().createElement(m(),y({},Object.assign({},c,d(l)),{render:e=>{const a=t(e.data),c=g()(e.requestParams,[u.paramsType,u.current],1),s=g()(e.requestParams,[u.paramsType,u.pageSizeName])||u.pageSize,m=!a.total||c*s>=a.total;return n().createElement(v,y({},p,{completeTips:o,isLoading:!e.isComplete,noMore:m,onLoader:async()=>{await e.loadMore(h()({[u.paramsType]:{[u.pageSizeName]:s,[u.current]:c+1}},d(l)),r)}}),i({fetchApi:e,list:a.list,data:e.data}))}}))}}}]);
//# sourceMappingURL=35.0bc60c54.chunk.js.map